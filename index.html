<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Document</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/AR.js@1.6.2/aframe/build/aframe-ar.js"></script> -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0px; overflow: hidden;">
    <button onclick="chair()">Tree</button>
    <button onclick="tree()">Chair</button>
    <input type="range" name="slider" id="slider" min="1" max="360" value="1" onchange="rotate()">
    <!-- <button onclick="ChangeColor()"></button> -->
    <a-scene embedded arjs>

        <a-assets>
            <a-asset-item id="adam" response-type="arraybuffer" src="assets/tree.gltf"></a-asset-item>
            <a-asset-item id="mike" response-type="arraybuffer" src='assets/coffee_table.gltf'></a-asset-item>
      </a-assets>

        <a-marker preset="hiro">
            <!-- <a-box position="0 0 0" material="color:red;" animation="property: rotation; to: 360 360 0; dur: 2000; repeat:indefinite; easing: linear; loop: true">
            </a-box> -->
            <a-entity position="0 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#mike"></a-entity>
        </a-marker>
        <a-entity camera>

        </a-entity>
    </a-scene>
</body>
<script>
    function chair() {
        var chair = document.querySelector('a-entity');
        chair.removeAttribute('gltf-model');
        chair.setAttribute('gltf-model','#adam');
        chair.setAttribute('scale','0.1 0.1 0.1');
    }

    function tree() {
        var tree = document.querySelector('a-entity');
        tree.removeAttribute('gltf-model');
        tree.setAttribute('gltf-model','#mike');
        tree.setAttribute('scale','1 1 1');
    }

    function rotate() {
    //     var col = document.querySelector('a-entity');
    //     col.object3D.rotation.set(
    //         THREE.Math.degToRad(15),
    //         THREE.Math.degToRad(30),
    //         THREE.Math.degToRad(90)
    //     );
    //     col.object3D.rotation.x += Math.PI/2;

    //     col.setAttribute('rotation', {x: 15});
    // }

    AFRAME.registerComponent('drag-rotate-component',{
      schema : { speed : {default:1}},
      init : function(){
        this.ifMouseDown = false;
        this.x_cord = 0;
        this.y_cord = 0;
        document.addEventListener('mousedown',this.OnDocumentMouseDown.bind(this));
        document.addEventListener('mouseup',this.OnDocumentMouseUp.bind(this));
        document.addEventListener('mousemove',this.OnDocumentMouseMove.bind(this));
      },
      OnDocumentMouseDown : function(event){
        this.ifMouseDown = true;
        this.x_cord = event.clientX;
        this.y_cord = event.clientY;
      },
      OnDocumentMouseUp : function(){
        this.ifMouseDown = false;
      },
      OnDocumentMouseMove : function(event)
      {
        if(this.ifMouseDown)
        {
          var temp_x = event.clientX-this.x_cord;
          var temp_y = event.clientY-this.y_cord;
          if(Math.abs(temp_y)<Math.abs(temp_x))
          {
            this.el.object3D.rotateY(temp_x*this.data.speed/1000);
          }
          else
          {
            this.el.object3D.rotateX(temp_y*this.data.speed/1000);
          }
          this.x_cord = event.clientX;
          this.y_cord = event.clientY;
        }
      }
    });
}
</script>
</html>